# Руководство для разработчика
## Разработка юнит-тестов
### Тестирование логики, связанной с базой данных
Тестирование логики, связанной с базой данных должно проводиться на реальной базе данных. Для этого, на машине разработчика должен быть развернут SqlExpress. Строка подключения СУБД задается в конфигурационном файле тестового проекта (например, App.config).

DbContext и репозитории конфигурируются в **Wcf.TestCore.TestModule.cs**. При запуске каждого теста, тестовая БД создается, а после окончания удаляется.

Данные для тестов нужно задавать через отдельный класс Fixture (см **Wcf.WebApi.Tests.ExampleFixture** для примера).

Все такие тесты должны быть унаследованны от класса **Wcf.WebApi.Tests.AFacts**.
Пример теста: **Wcf.WebApi.Tests.RepositoryFacts**
# Локализация
Все тексты сообщений, возвращаемых системой (в том числе сообщений об ошибках) должны быть помещены в проект **Wcf.Localization**.
# Базовые классы исключений
**LocalizedException** - базовый класс локализованного исключения. При создании, ему нужно передать ключ сообщения.
**WebApiException** - базовый класс для всех исключений, выбрасываемых в api. Все исключения, которые создают сервисы апи должны использовать этот класс, либо класс унаследованный от него.
**WebApiNotFoundException** - исключение, которое должно выбрасываться, если в БД или в другом источнике не найден запрошенный элемент.
**WebApiPermissionException** - исключение, которое должно выбрасываться, если у пользователя нет прав на получение или изменение запрошенного ресурса.

**ApiBaseContoller** умеет правильно обрабатывать и возвращать все типы приведенных выше исключений.
